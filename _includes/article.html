{%- assign item = include.publication -%}
{%- assign tag_map = include.tag_map -%}

<div class="article col col-4 col-d-6 col-t-12">

  {%- if item.image -%}
  <a class="article__image" href="{{ item.url | prepend: site.baseurl }}">
    <img class="lazy"
         data-src="{{ site.baseurl }}{{ item.image }}"
         alt="{{ item.title | escape }}">
  </a>
  {%- endif -%}

  <ul>
    {% for tag in tag_map %}
      <li>{{ tag[0] }}: {{ tag[1].size }} posts</li>
    {% endfor %}
  </ul>

  {%- if item.tags and item.tags != empty -%}
  <div class="article-tags__box">
    {%- for tag in item.tags -%}
      <a href="{{ site.baseurl }}/tags/?tag={{ tag | downcase | url_encode }}"
         class="article__tag">{{ tag }}</a>
    {%- endfor -%}
  </div>
  {%- endif -%}

  <h2 class="article__title">
    <a href="{{ item.url | prepend: site.baseurl }}">{{ item.title }}</a>
  </h2>

  <div class="article__meta">
    <div class="article-info">
      <span class="article__author-link">
        {%- if item.author %}
          {%- if item.author.size > 1 %}
            {%- for author in item.author %}
              {{ author }}{% if forloop.last == false %}{{ ',' }} {% endif %}
            {%- endfor %}
          {%- else %}
            {{ item.author }}
          {%- endif %}
        {%- else %}
          {{ site.data.settings.author.author__name }}
        {%- endif %}
      </span> â€“
      <time class="article__date"
            datetime="{{ item.date | date_to_xmlschema }}">
        {{ item.date | date_to_string }}
      </time>
    </div>
  </div>

  <p class="article__excerpt">
    {%- if item.description -%}
      {{ item.description }}
    {%- else -%}
      {{ item.content | strip_html | truncate: 250 }}
    {%- endif -%}
  </p>
</div>
